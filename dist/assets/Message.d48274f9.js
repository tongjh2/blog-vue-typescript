import{d as e,r as a,_ as t,p as s,l as r,b as l,c as n,e as o,g as m,m as p,k as i}from"./vendor.e7f10a53.js";import{s as d,u}from"./index.40b988f6.js";const g=(e,a,t)=>{if(!a)return t(new Error("邮箱不能为空"))},c=(e,a,t)=>{if(!a)return t(new Error("手机不能为空"))},f=(e,a,t)=>{if(!a)return t(new Error("名字不能为空"))},b=(e,a,t)=>{if(!a)return t(new Error("内容不能为空"))};var w=e({name:"Message",setup(){const e=a({btnLoading:!1,cacheTime:0,times:0,params:{email:"",phone:"",name:"",content:""},rules:{email:[{validator:g,trigger:"blur"}],phone:[{validator:c,trigger:"blur"}],name:[{validator:f,trigger:"blur"}],content:[{validator:b,trigger:"blur"}]}});return{state:e,submit:async()=>{if(e.times>3)return void t({message:"您今天留言的次数已经用完，明天再来留言吧！",type:"warning"});let a=(new Date).getTime();if(a-e.cacheTime<6e4)return void t({message:"您留言太过频繁，1 分钟后再来留言吧！",type:"warning"});const s=new RegExp("^[a-z0-9]+([._\\-]*[a-z0-9])*@([a-z0-9]+[-a-z0-9]*[a-z0-9]+.){1,63}[a-z0-9]+$");e.params.email?s.test(e.params.email)?e.params.phone?e.params.name?e.params.content?(e.btnLoading=!0,await d.post(u.addMessage,e.params),e.btnLoading=!1,e.times++,e.cacheTime=a,t({message:"感谢您的留言，有必要的，博主有空都会回复您的 ！",type:"success"}),e.params.content=""):t({message:"内容不能为空",type:"warning"}):t({message:"名字不能为空",type:"warning"}):t({message:"手机不能为空",type:"warning"}):t({message:"请输入格式正确的邮箱！",type:"warning"}):t({message:"邮箱不能为空！",type:"warning"})}}}});const y=p();s("data-v-5fb3e94d");const h={class:"message left"},V=i("提交");r();const v=y(((e,a,t,s,r,p)=>{const i=l("el-input"),d=l("el-form-item"),u=l("el-button"),g=l("el-form");return n(),o("div",h,[m(g,{model:e.state.params,"status-icon":"",rules:e.state.rules,ref:"params","label-width":"50px",class:"demo-ruleForm"},{default:y((()=>[m(d,{label:"邮箱",prop:"email"},{default:y((()=>[m(i,{type:"text",placeholder:"必填",modelValue:e.state.params.email,"onUpdate:modelValue":a[1]||(a[1]=a=>e.state.params.email=a),autocomplete:"off"},null,8,["modelValue"])])),_:1}),m(d,{label:"手机",prop:"phone"},{default:y((()=>[m(i,{modelValue:e.state.params.phone,"onUpdate:modelValue":a[2]||(a[2]=a=>e.state.params.phone=a),autocomplete:"off"},null,8,["modelValue"])])),_:1}),m(d,{label:"名字",prop:"name"},{default:y((()=>[m(i,{modelValue:e.state.params.name,"onUpdate:modelValue":a[3]||(a[3]=a=>e.state.params.name=a)},null,8,["modelValue"])])),_:1}),m(d,{label:"内容",prop:"content"},{default:y((()=>[m(i,{type:"textarea",placeholder:"必填",modelValue:e.state.params.content,"onUpdate:modelValue":a[4]||(a[4]=a=>e.state.params.content=a)},null,8,["modelValue"])])),_:1}),m(d,null,{default:y((()=>[m(u,{type:"primary",loading:e.state.btnLoading,onClick:e.submit},{default:y((()=>[V])),_:1},8,["loading","onClick"])])),_:1})])),_:1},8,["model","rules"])])}));w.render=v,w.__scopeId="data-v-5fb3e94d";export default w;
